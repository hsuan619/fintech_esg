import streamlit as st

# åŒ¯å…¥ UI æ¨¡çµ„
from ui import tab_pdf_to_md, tab_generate_prompt, tab_risk_assessment, tab_pdf_to_json, tab_manual_process

# è¨­å®šé é¢é…ç½® (å¿…é ˆæ˜¯ç¬¬ä¸€å€‹ Streamlit æŒ‡ä»¤)
st.set_page_config(page_title="ESG å ±å‘Šæ›¸æ¼‚ç¶ ç¨½æ ¸å°å¹«æ‰‹", layout="wide", page_icon="ğŸŒ±")

# ==========================================
# Streamlit ç¶²é ä»‹é¢ (Web Interface)
# ==========================================

st.title("ğŸŒ± ESG å ±å‘Šæ›¸æ¼‚ç¶ ç¨½æ ¸å°å¹«æ‰‹")
st.markdown("""
æœ¬å·¥å…·æä¾›å¾ **PDF å ±å‘Šè½‰æ›** åˆ° **ç¸¾æ•ˆé¢¨éšªç¨½æ ¸** çš„ä¸€ç«™å¼æµç¨‹ã€‚
è«‹ä¾åºä½¿ç”¨ä¸‹æ–¹åˆ†é åŠŸèƒ½ï¼š
""")

# å»ºç«‹å››å€‹ä¸»è¦é ç±¤ (æ–°å¢ "æ‰‹å‹•è™•ç†")
# tab1, tab2, tab3, tab4, tab5 = st.tabs([
#     "ğŸ“„ 1. å ±å‘Šè½‰æ› (PDF to MD)", 
#     "ğŸ¤– 2. ç”¢ç”Ÿç¨½æ ¸ Prompt", 
#     "ğŸš€ 3. è‡ªå‹•ç›®æ¨™æ“·å– (PDF to JSON)", # é€™æ˜¯ä¹‹å‰ tab_pdf_to_json çš„ä½ç½®ï¼Œå‡è¨­æ‚¨æœ‰
#     "ğŸ› ï¸ 4. æ‰‹å‹•è™•ç†æ¨¡å¼ (å… API)",      # [æ–°å¢]
#     "ğŸ“Š 5. ç¸¾æ•ˆè¿½è¹¤èˆ‡é¢¨éšªè©•ä¼°"
# ])

tab3, tab4, tab5 = st.tabs([
   
    "ğŸš€ N. è‡ªå‹•ç›®æ¨™æ“·å– (PDF to JSON)", # é€™æ˜¯ä¹‹å‰ tab_pdf_to_json çš„ä½ç½®ï¼Œå‡è¨­æ‚¨æœ‰
    "ğŸ› ï¸ 1. æ‰‹å‹•è™•ç†æ¨¡å¼ (å… API)",      # [æ–°å¢]
    "ğŸ“Š 2. ç¸¾æ•ˆè¿½è¹¤èˆ‡é¢¨éšªè©•ä¼°"
])

# # ------------------------------------------
# # Tab 1: å ±å‘Šè½‰æ› (PDF -> Markdown)
# # ------------------------------------------
# with tab1:
#     tab_pdf_to_md.render()

# # ------------------------------------------
# # Tab 2: ç”¢ç”Ÿç¨½æ ¸ Prompt (åŸºæ–¼ MD)
# # ------------------------------------------
# with tab2:
#     tab_generate_prompt.render()

# ------------------------------------------
# Tab 3: è‡ªå‹•ç›®æ¨™æ“·å– (PDF -> JSON, éœ€ API)
# ------------------------------------------
with tab3:
    # å‡è¨­æ‚¨æœ‰é€™å€‹æ¨¡çµ„ï¼Œè‹¥æ²’æœ‰å¯çœç•¥
    if hasattr(tab_pdf_to_json, 'render'):
        tab_pdf_to_json.render()
    else:
        st.info("æ­¤åŠŸèƒ½æ¨¡çµ„å°šæœªè¼‰å…¥")

# ------------------------------------------
# Tab 4: æ‰‹å‹•è™•ç†æ¨¡å¼ (æ–°å¢)
# ------------------------------------------
with tab4:
    tab_manual_process.render()

# ------------------------------------------
# Tab 5: ç¸¾æ•ˆè¿½è¹¤èˆ‡é¢¨éšªè©•ä¼°
# ------------------------------------------
with tab5:
    tab_risk_assessment.render()